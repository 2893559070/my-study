<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件 | 啊涵的笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/my-study/nb.jpg">
    <meta name="description" content="大好青春">
    
    <link rel="preload" href="/my-study/assets/css/0.styles.14e0d1e4.css" as="style"><link rel="preload" href="/my-study/assets/js/app.4ba2942b.js" as="script"><link rel="preload" href="/my-study/assets/js/2.83264f93.js" as="script"><link rel="preload" href="/my-study/assets/js/90.107d8c07.js" as="script"><link rel="prefetch" href="/my-study/assets/js/10.37bd338d.js"><link rel="prefetch" href="/my-study/assets/js/100.ba11ccea.js"><link rel="prefetch" href="/my-study/assets/js/101.481d91e6.js"><link rel="prefetch" href="/my-study/assets/js/102.c6162013.js"><link rel="prefetch" href="/my-study/assets/js/103.3299eb4b.js"><link rel="prefetch" href="/my-study/assets/js/104.450f1a95.js"><link rel="prefetch" href="/my-study/assets/js/105.0a1dec81.js"><link rel="prefetch" href="/my-study/assets/js/106.5245fe5c.js"><link rel="prefetch" href="/my-study/assets/js/107.d260e56d.js"><link rel="prefetch" href="/my-study/assets/js/108.7cee0472.js"><link rel="prefetch" href="/my-study/assets/js/109.180e2842.js"><link rel="prefetch" href="/my-study/assets/js/11.f783bac0.js"><link rel="prefetch" href="/my-study/assets/js/110.620a5175.js"><link rel="prefetch" href="/my-study/assets/js/111.eb380395.js"><link rel="prefetch" href="/my-study/assets/js/112.e51ee93c.js"><link rel="prefetch" href="/my-study/assets/js/113.8526716d.js"><link rel="prefetch" href="/my-study/assets/js/114.a01a1c51.js"><link rel="prefetch" href="/my-study/assets/js/115.2b00bdcc.js"><link rel="prefetch" href="/my-study/assets/js/116.52448255.js"><link rel="prefetch" href="/my-study/assets/js/117.8cfec530.js"><link rel="prefetch" href="/my-study/assets/js/118.ccdf6735.js"><link rel="prefetch" href="/my-study/assets/js/119.3aeb4dba.js"><link rel="prefetch" href="/my-study/assets/js/12.e881cb1d.js"><link rel="prefetch" href="/my-study/assets/js/120.162c345d.js"><link rel="prefetch" href="/my-study/assets/js/121.161f7b5f.js"><link rel="prefetch" href="/my-study/assets/js/122.1e4ad14c.js"><link rel="prefetch" href="/my-study/assets/js/123.789bebfb.js"><link rel="prefetch" href="/my-study/assets/js/124.72f8b7b6.js"><link rel="prefetch" href="/my-study/assets/js/125.b26e7bda.js"><link rel="prefetch" href="/my-study/assets/js/126.33490f62.js"><link rel="prefetch" href="/my-study/assets/js/13.088052e5.js"><link rel="prefetch" href="/my-study/assets/js/14.44263a7f.js"><link rel="prefetch" href="/my-study/assets/js/15.b7678742.js"><link rel="prefetch" href="/my-study/assets/js/16.66ad4333.js"><link rel="prefetch" href="/my-study/assets/js/17.7953c005.js"><link rel="prefetch" href="/my-study/assets/js/18.5b089320.js"><link rel="prefetch" href="/my-study/assets/js/19.e16b18d4.js"><link rel="prefetch" href="/my-study/assets/js/20.e0e48419.js"><link rel="prefetch" href="/my-study/assets/js/21.b068cbb2.js"><link rel="prefetch" href="/my-study/assets/js/22.3f6a0c63.js"><link rel="prefetch" href="/my-study/assets/js/23.f1daba6d.js"><link rel="prefetch" href="/my-study/assets/js/24.68566a47.js"><link rel="prefetch" href="/my-study/assets/js/25.c4e71eb0.js"><link rel="prefetch" href="/my-study/assets/js/26.8c0d9275.js"><link rel="prefetch" href="/my-study/assets/js/27.84d1ed21.js"><link rel="prefetch" href="/my-study/assets/js/28.953704ec.js"><link rel="prefetch" href="/my-study/assets/js/29.64a4b809.js"><link rel="prefetch" href="/my-study/assets/js/3.dfaba457.js"><link rel="prefetch" href="/my-study/assets/js/30.11bf39a7.js"><link rel="prefetch" href="/my-study/assets/js/31.ce84786c.js"><link rel="prefetch" href="/my-study/assets/js/32.07e3fdd2.js"><link rel="prefetch" href="/my-study/assets/js/33.05601ba8.js"><link rel="prefetch" href="/my-study/assets/js/34.01cebb05.js"><link rel="prefetch" href="/my-study/assets/js/35.877fc061.js"><link rel="prefetch" href="/my-study/assets/js/36.8f5a86e7.js"><link rel="prefetch" href="/my-study/assets/js/37.e8da7d53.js"><link rel="prefetch" href="/my-study/assets/js/38.6e8fc788.js"><link rel="prefetch" href="/my-study/assets/js/39.98a32bcc.js"><link rel="prefetch" href="/my-study/assets/js/4.9460d833.js"><link rel="prefetch" href="/my-study/assets/js/40.ed4a92c8.js"><link rel="prefetch" href="/my-study/assets/js/41.931da600.js"><link rel="prefetch" href="/my-study/assets/js/42.84f56fcb.js"><link rel="prefetch" href="/my-study/assets/js/43.a5fc16ee.js"><link rel="prefetch" href="/my-study/assets/js/44.ae1e526c.js"><link rel="prefetch" href="/my-study/assets/js/45.5b850787.js"><link rel="prefetch" href="/my-study/assets/js/46.3ad470a9.js"><link rel="prefetch" href="/my-study/assets/js/47.5592e3b5.js"><link rel="prefetch" href="/my-study/assets/js/48.e96f587e.js"><link rel="prefetch" href="/my-study/assets/js/49.26202f5c.js"><link rel="prefetch" href="/my-study/assets/js/5.32dde0b2.js"><link rel="prefetch" href="/my-study/assets/js/50.e119a313.js"><link rel="prefetch" href="/my-study/assets/js/51.a31240a6.js"><link rel="prefetch" href="/my-study/assets/js/52.2cf018de.js"><link rel="prefetch" href="/my-study/assets/js/53.faece6a2.js"><link rel="prefetch" href="/my-study/assets/js/54.cc7c65a5.js"><link rel="prefetch" href="/my-study/assets/js/55.4bca37d7.js"><link rel="prefetch" href="/my-study/assets/js/56.628783ac.js"><link rel="prefetch" href="/my-study/assets/js/57.c585e497.js"><link rel="prefetch" href="/my-study/assets/js/58.c4b52789.js"><link rel="prefetch" href="/my-study/assets/js/59.1668d15c.js"><link rel="prefetch" href="/my-study/assets/js/6.345e52dd.js"><link rel="prefetch" href="/my-study/assets/js/60.3b0b4be8.js"><link rel="prefetch" href="/my-study/assets/js/61.483b661f.js"><link rel="prefetch" href="/my-study/assets/js/62.dfe15d99.js"><link rel="prefetch" href="/my-study/assets/js/63.9b627921.js"><link rel="prefetch" href="/my-study/assets/js/64.3d82cf77.js"><link rel="prefetch" href="/my-study/assets/js/65.146ad300.js"><link rel="prefetch" href="/my-study/assets/js/66.3746ed9d.js"><link rel="prefetch" href="/my-study/assets/js/67.e34d9973.js"><link rel="prefetch" href="/my-study/assets/js/68.0f943255.js"><link rel="prefetch" href="/my-study/assets/js/69.67896ffd.js"><link rel="prefetch" href="/my-study/assets/js/7.f39602d3.js"><link rel="prefetch" href="/my-study/assets/js/70.02195e1c.js"><link rel="prefetch" href="/my-study/assets/js/71.2f1c90a3.js"><link rel="prefetch" href="/my-study/assets/js/72.0a13c3d1.js"><link rel="prefetch" href="/my-study/assets/js/73.c2b779b6.js"><link rel="prefetch" href="/my-study/assets/js/74.815dce33.js"><link rel="prefetch" href="/my-study/assets/js/75.95219a0d.js"><link rel="prefetch" href="/my-study/assets/js/76.cb578fb9.js"><link rel="prefetch" href="/my-study/assets/js/77.884845db.js"><link rel="prefetch" href="/my-study/assets/js/78.f2136505.js"><link rel="prefetch" href="/my-study/assets/js/79.1d7d414e.js"><link rel="prefetch" href="/my-study/assets/js/8.9f209f96.js"><link rel="prefetch" href="/my-study/assets/js/80.7f115322.js"><link rel="prefetch" href="/my-study/assets/js/81.3f83e03c.js"><link rel="prefetch" href="/my-study/assets/js/82.e7e7511a.js"><link rel="prefetch" href="/my-study/assets/js/83.e4a85578.js"><link rel="prefetch" href="/my-study/assets/js/84.514fc872.js"><link rel="prefetch" href="/my-study/assets/js/85.2cb91096.js"><link rel="prefetch" href="/my-study/assets/js/86.7292aa10.js"><link rel="prefetch" href="/my-study/assets/js/87.ba173e1e.js"><link rel="prefetch" href="/my-study/assets/js/88.771400d3.js"><link rel="prefetch" href="/my-study/assets/js/89.8f21a604.js"><link rel="prefetch" href="/my-study/assets/js/9.a75c5f19.js"><link rel="prefetch" href="/my-study/assets/js/91.455c34fe.js"><link rel="prefetch" href="/my-study/assets/js/92.0e45975a.js"><link rel="prefetch" href="/my-study/assets/js/93.9b43dc3f.js"><link rel="prefetch" href="/my-study/assets/js/94.0ddcec23.js"><link rel="prefetch" href="/my-study/assets/js/95.8d817c18.js"><link rel="prefetch" href="/my-study/assets/js/96.5beaa38f.js"><link rel="prefetch" href="/my-study/assets/js/97.0a717433.js"><link rel="prefetch" href="/my-study/assets/js/98.899e05c7.js"><link rel="prefetch" href="/my-study/assets/js/99.f17f88b9.js">
    <link rel="stylesheet" href="/my-study/assets/css/0.styles.14e0d1e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-study/" class="home-link router-link-active"><!----> <span class="site-name">啊涵的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Echarts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>error</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java SpringMvc</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java基础一</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React Native</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>uniapp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue2</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-study/menu/vue2/baidumap.html" class="sidebar-link">百度地图开发</a></li><li><a href="/my-study/menu/vue2/component动态组件.html" class="sidebar-link">component动态组件</a></li><li><a href="/my-study/menu/vue2/directive（指令）.html" class="sidebar-link">directive</a></li><li><a href="/my-study/menu/vue2/eventBus（兄弟传值）.html" class="sidebar-link">eventBus</a></li><li><a href="/my-study/menu/vue2/extend（动态创建组件）.html" class="sidebar-link">extend</a></li><li><a href="/my-study/menu/vue2/keep-alive.html" class="sidebar-link">keep-alive</a></li><li><a href="/my-study/menu/vue2/plugin.html" class="sidebar-link">plugin ( 插件 )</a></li><li><a href="/my-study/menu/vue2/router原生js实现.html" class="sidebar-link">router原生js实现</a></li><li><a href="/my-study/menu/vue2/vue1.0实现.html" class="sidebar-link">vue1.0实现</a></li><li><a href="/my-study/menu/vue2/vuex.html" class="sidebar-link">vuex</a></li><li><a href="/my-study/menu/vue2/vuex原生js实现.html" class="sidebar-link">vuex原生js实现</a></li><li><a href="/my-study/menu/vue2/组件.html" class="active sidebar-link">组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#组件通信常用方式" class="sidebar-link">组件通信常用方式</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#组件通信" class="sidebar-link">组件通信</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#事件总线" class="sidebar-link">事件总线</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#parent-root" class="sidebar-link">$parent/$root</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#children" class="sidebar-link">$children</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#attrs-listeners" class="sidebar-link">$attrs/$listeners</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#refs" class="sidebar-link">refs</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#provide-inject" class="sidebar-link">provide/inject</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#插槽" class="sidebar-link">插槽</a></li><li class="sidebar-sub-header"><a href="/my-study/menu/vue2/组件.html#实现弹窗组件" class="sidebar-link">实现弹窗组件</a></li></ul></li><li><a href="/my-study/menu/vue2/路由.html" class="sidebar-link">路由</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webPack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微信小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微前端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>方法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>百度地图</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>累计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>轮子</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试区</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h1> <h2 id="组件通信常用方式"><a href="#组件通信常用方式" class="header-anchor">#</a> 组件通信常用方式</h2> <ul><li>props</li> <li>eventbus</li> <li>vuex</li> <li>自定义事件</li> <li>边界情况
<ul><li>$parent</li> <li>$children</li> <li>$root</li> <li>$refs</li> <li>provide/inject</li></ul></li> <li>非prop特性
<ul><li>$attrs</li> <li>$listeners</li></ul></li></ul> <h2 id="组件通信"><a href="#组件通信" class="header-anchor">#</a> 组件通信</h2> <h3 id="props"><a href="#props" class="header-anchor">#</a> props</h3> <h4 id="父给子传值"><a href="#父给子传值" class="header-anchor">#</a> 父给子传值</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// child </span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> String <span class="token punctuation">}</span>
 <span class="token comment">// parent </span>
 <span class="token operator">&lt;</span>HelloWorld msg<span class="token operator">=</span><span class="token string">&quot;Welcome to Your Vue.js App&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="自定义事件-emit"><a href="#自定义事件-emit" class="header-anchor">#</a> 自定义事件 $emit</h3> <h4 id="子给父传值"><a href="#子给父传值" class="header-anchor">#</a> 子给父传值</h4> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// child </span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> good<span class="token punctuation">)</span> 
  <span class="token comment">// parent </span>
  <span class="token operator">&lt;</span>Cart @add<span class="token operator">=</span><span class="token string">&quot;cartAdd($event)&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Cart<span class="token operator">&gt;</span>
</code></pre></div><h2 id="事件总线"><a href="#事件总线" class="header-anchor">#</a> 事件总线</h2> <h3 id="任意两个组件之间传值常用事件总线-或-vuex的方式。"><a href="#任意两个组件之间传值常用事件总线-或-vuex的方式。" class="header-anchor">#</a> 任意两个组件之间传值常用事件总线 或 vuex的方式。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bus：事件派发、监听和回调管理</span>
<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 
  <span class="token punctuation">}</span>
  <span class="token function">$on</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 
     <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
  <span class="token function">$emit</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span> 
  <span class="token punctuation">}</span>

  <span class="token comment">// main.js </span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// child1 </span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span> 
  <span class="token comment">// child2 </span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>实践中通常用Vue代替Bus，因为Vue已经实现了相应接口</p></div> <h2 id="parent-root"><a href="#parent-root" class="header-anchor">#</a> $parent/$root</h2> <h3 id="兄弟组件之间通信可通过共同祖辈搭桥-parent或-root。"><a href="#兄弟组件之间通信可通过共同祖辈搭桥-parent或-root。" class="header-anchor">#</a> 兄弟组件之间通信可通过共同祖辈搭桥，$parent或$root。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// brother1 </span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span> 
<span class="token comment">// brother2 </span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="children"><a href="#children" class="header-anchor">#</a> $children</h2> <h3 id="父组件可以通过-children访问子组件实现父子通信。"><a href="#父组件可以通过-children访问子组件实现父子通信。" class="header-anchor">#</a> 父组件可以通过$children访问子组件实现父子通信。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// parent </span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>xx <span class="token operator">=</span> <span class="token string">'xxx'</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>注意：$children不能保证子元素顺序</p></div> <h2 id="attrs-listeners"><a href="#attrs-listeners" class="header-anchor">#</a> $attrs/$listeners</h2> <h3 id="包含了父作用域中不作为-prop-被识别-且获取-的特性绑定-class-和-style-除外-。当一个组件没有声明任何-prop-时-这里会包含所有父作用域的绑定-class-和-style-除外-并且可以通过-v-bind-attrs-传入内部组件-在创建高级别的组件时非常有用。"><a href="#包含了父作用域中不作为-prop-被识别-且获取-的特性绑定-class-和-style-除外-。当一个组件没有声明任何-prop-时-这里会包含所有父作用域的绑定-class-和-style-除外-并且可以通过-v-bind-attrs-传入内部组件-在创建高级别的组件时非常有用。" class="header-anchor">#</a> 包含了父作用域中不作为 prop 被识别 (且获取) 的特性绑定 ( class 和 style 除外)。当一个组件没有声明任何 prop 时，这里会包含所有父作用域的绑定 ( class 和 style 除外)，并且可以通过 v- bind=&quot;$attrs&quot; 传入内部组件——在创建高级别的组件时非常有用。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// child：并未在props中声明foo </span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>$attrs<span class="token punctuation">.</span>foo<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> 
<span class="token comment">// parent </span>
<span class="token operator">&lt;</span>HelloWorld foo<span class="token operator">=</span><span class="token string">&quot;foo&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p><a href="https://cn.vuejs.org/v2/api/#vm-attrs" target="_blank" rel="noopener noreferrer">文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="refs"><a href="#refs" class="header-anchor">#</a> refs</h2> <h3 id="获取子节点引用"><a href="#获取子节点引用" class="header-anchor">#</a> 获取子节点引用</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// parent </span>
<span class="token operator">&lt;</span>HelloWorld ref<span class="token operator">=</span><span class="token string">&quot;hw&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span> 
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>hw<span class="token punctuation">.</span>xx <span class="token operator">=</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span>
</code></pre></div><h2 id="provide-inject"><a href="#provide-inject" class="header-anchor">#</a> provide/inject</h2> <h3 id="能够实现祖先和后代之间传值"><a href="#能够实现祖先和后代之间传值" class="header-anchor">#</a> 能够实现祖先和后代之间传值</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ancestor </span>
<span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token comment">// descendant </span>
<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="插槽"><a href="#插槽" class="header-anchor">#</a> 插槽</h2> <h3 id="插槽语法是vue-实现的内容分发-api-用于复合组件开发。该技术在通用组件库开发中有大量应用。"><a href="#插槽语法是vue-实现的内容分发-api-用于复合组件开发。该技术在通用组件库开发中有大量应用。" class="header-anchor">#</a> 插槽语法是Vue 实现的内容分发 API，用于复合组件开发。该技术在通用组件库开发中有大量应用。</h3> <ul><li><h3 id="匿名插槽"><a href="#匿名插槽" class="header-anchor">#</a> 匿名插槽</h3></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// comp1 </span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
<span class="token comment">// parent </span>
<span class="token operator">&lt;</span>comp<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>comp<span class="token operator">&gt;</span>
</code></pre></div><ul><li><h3 id="具名插槽"><a href="#具名插槽" class="header-anchor">#</a> 具名插槽</h3></li></ul> <p>将内容分发到子组件指定位置</p> <div class="language-html extra-class"><pre class="language-html"><code>// comp2 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
// parent 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Comp2</span><span class="token punctuation">&gt;</span></span> 
  <span class="token comment">&lt;!-- 默认插槽用default做参数 --&gt;</span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token punctuation">&gt;</span></span>具名插槽<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
  <span class="token comment">&lt;!-- 具名插槽用插槽名做参数 --&gt;</span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>content</span><span class="token punctuation">&gt;</span></span>内容...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Comp2</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><h3 id="作用域插槽"><a href="#作用域插槽" class="header-anchor">#</a> 作用域插槽</h3></li></ul> <p>分发内容要用到子组件中的数据</p> <div class="language-html extra-class"><pre class="language-html"><code>// comp3 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:foo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>foo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
// parent 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Comp3</span><span class="token punctuation">&gt;</span></span> 
  <span class="token comment">&lt;!-- 把v-slot的值指定为作用域上下文对象 --&gt;</span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
    来自子组件数据：{{slotProps.foo}} 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Comp3</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="实现弹窗组件"><a href="#实现弹窗组件" class="header-anchor">#</a> 实现弹窗组件</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 弹窗这类组件的特点是它们在当前vue实例之外独立存在，通常挂载于body；它们是通过JS动态创建的，不需要在任何组件中声明。常见使用姿势：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$create</span><span class="token punctuation">(</span>Notice<span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'社会你杨哥喊你来搬砖'</span><span class="token punctuation">,</span> 
   <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'提示信息'</span><span class="token punctuation">,</span> 
   <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1000</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>create函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span> 
<span class="token comment">// 创建函数接收要创建组件定义 </span>
<span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">Component<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// 创建一个Vue新实例 </span>
  <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// render函数将传入组件配置对象转换为虚拟dom </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">h</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token punctuation">{</span> props <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token punctuation">{</span> props <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">//执行挂载函数，但未指定挂载目标，表示只执行初始化工作 </span>
    <span class="token comment">// 将生成dom元素追加至body </span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">// 给组件实例添加销毁方法 </span>
    <span class="token keyword">const</span> comp <span class="token operator">=</span> vm<span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
    comp<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span> 
      vm<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> comp<span class="token punctuation">;</span> 
  <span class="token punctuation">}</span>
  <span class="token comment">// 暴露调用接口 </span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> create<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hide<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>duration<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> create <span class="token keyword">from</span> <span class="token string">&quot;@/utils/create&quot;</span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> Notice <span class="token keyword">from</span> <span class="token string">&quot;@/components/Notice&quot;</span><span class="token punctuation">;</span>

<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
  <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token parameter">form</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>form<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">const</span> notice <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>Notice<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;社会你杨哥喊你来搬砖&quot;</span><span class="token punctuation">,</span> 
          <span class="token literal-property property">message</span><span class="token operator">:</span> valid <span class="token operator">?</span> <span class="token string">&quot;请求登录!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;校验失败!&quot;</span><span class="token punctuation">,</span> 
          <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1000</span> 
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
      notice<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/my-study/menu/vue2/vuex原生js实现.html" class="prev">
        vuex原生js实现
      </a></span> <span class="next"><a href="/my-study/menu/vue2/路由.html">
        路由
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/my-study/assets/js/app.4ba2942b.js" defer></script><script src="/my-study/assets/js/2.83264f93.js" defer></script><script src="/my-study/assets/js/90.107d8c07.js" defer></script>
  </body>
</html>
